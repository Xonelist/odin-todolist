(()=>{"use strict";function e(e){const t=document.createElement("dialog"),n=document.createElement("span");return n.className="btn-span",n.textContent="X",n.addEventListener("click",(()=>t.close())),t.id=e,t.appendChild(n),t}function t(e,t,n){const o=document.createElement("form"),c=document.createElement("div"),d=document.createElement("button");return o.action="",o.method="post",o.id=e,o.name=e,c.className="form-input",t.forEach((e=>{const t=document.createElement("input"),n=document.createElement("label");t.type=e.inputType,t.id=e.inputId,t.name=e.inputId,t.required=!0,n.setAttribute("for",e.inputId),n.textContent=e.labelContent,c.appendChild(n),c.appendChild(t)})),d.type="submit",d.id=n.id,d.textContent=n.content,o.appendChild(c),o.appendChild(d),o}class n{constructor(e,t){this.title=e,this.description=t,this.subproject={}}addSubProject(e){this.subproject[e]=new o(e)}}class o{constructor(e){this.subProjectTitle=e,this.content=[]}addContent(e,t){this.content.push(new c(t,e))}}class c{constructor(e,t,n){this.id=n,this.content=t,this.type=e,this.priority=!1}}!function(){const n=e("main-dialog"),o=t("getMainProject",[{inputType:"text",inputId:"project-title",labelContent:"Create New Main Project"},{inputType:"text",inputId:"project-desc",labelContent:"New Project Description"}],{id:"main-btn-submit",content:"Add Main Project"});n.appendChild(o),document.body.append(n)}(),function(){const n=e("sub-dialog"),o=t("getSubProject",[{inputType:"text",inputId:"subproject-title",labelContent:"Create New Sub Project"}],{id:"sub-btn-submit",content:"Add Sub Project"});n.appendChild(o),document.body.append(n)}(),function(){const e=document.createElement("nav");e.className="left-tab";const t={profile:"Profile",settings:"Settings",myProjects:"My Projects"};for(let n in t){const o=document.createElement("div");o.className=`tab ${n}`,o.innerHTML=`<h1>${t[n]}</h1>`,e.appendChild(o)}const n=document.createElement("div");n.className="sub-tab myProjects";const o=document.createElement("h3");o.id="btn-add",o.textContent="Add new Main Project",o.addEventListener("click",(()=>document.getElementById("main-dialog").showModal())),n.appendChild(o),e.appendChild(n);const c=document.createElement("div");c.className="collection-main-project",e.appendChild(c),document.body.insertBefore(e,document.body.firstChild)}(),function(e){document.getElementById("getMainProject").addEventListener("submit",(t=>{const n=document.forms.getMainProject;t.preventDefault(),e.addProject(n["project-title"].value,n["project-desc"].value),e.show(),n.reset(),document.getElementById("main-dialog").close()})),document.getElementById("getSubProject").addEventListener("submit",(t=>{t.preventDefault();const n=document.forms.getSubProject,o=document.querySelector(".show-subproject");console.log(n),e.myProject[o.id].addSubProject(n["subproject-title"].value),console.log(e.myProject),console.log(e.myProject[o.id]),e.update(o.id),n.reset(),document.getElementById("sub-dialog").close()}))}(new class{constructor(){this.myProject={}}addProject(e,t){this.myProject.hasOwnProperty(e)?alert(`Your project \`${e}\` has exist in database`):this.myProject[e]=new n(e,t)}saveStore(){localStorage.setItem("save",JSON.stringify(this.myProject))}loadStore(){return JSON.parse(localStorage.getItem("save"))}getForm(){const e=document.forms.getMainProject;this.myProject.hasOwnProperty(e["project-title"].value)?alert(`Project with the title \`${e["project-title"].value}\` has exist`):this.addProject(e["project-title"].value,e["project-desc"].value),this.saveDOM(),e.reset()}show(){const e=document.querySelector(".collection-main-project");e.textContent="";for(let t in this.myProject){const n=document.createElement("h3");n.className="collection",n.textContent=t,n.dataset.id=t,n.addEventListener("click",(()=>{this.update(t)})),e.appendChild(n)}}update(e){if(this.updateCollection(e),0!==Object.keys(this.myProject[e].subproject).length)for(let t in this.myProject[e].subproject)console.log(t),this.updateSubproject(t)}updateCollection(e){const t=document.querySelector(".show-template"),n=document.createElement("div"),o=document.createElement("h1"),c=document.createElement("p"),d=document.createElement("p"),i=document.createElement("div"),a=document.createElement("div");o.textContent=this.myProject[e].title,c.textContent=this.myProject[e].description,i.className="main-border",d.textContent="Add new Sub Project",d.id="add-sub",i.appendChild(d),a.className="show-subproject",a.id=this.myProject[e].title,d.addEventListener("click",(()=>{document.getElementById("sub-dialog").showModal()})),n.appendChild(o),n.appendChild(c),n.appendChild(i),n.appendChild(a),t.textContent="",t.appendChild(n)}updateSubproject(e){const t=document.querySelector(".show-subproject"),n=document.createElement("div"),o=document.createElement("div"),c=document.createElement("h3"),d=document.createElement("h3"),i=document.createElement("h3");c.textContent=e,d.className="add-ctn",d.textContent="+",i.className="rmv-ctn",i.textContent="-",o.className="edit-btn",o.appendChild(d),o.appendChild(i),n.className="sub-border",n.appendChild(c),n.appendChild(o),t.appendChild(n),t.appendChild(n)}})})();